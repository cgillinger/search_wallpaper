### **Projektbeskrivning â€“ Skrivbordsbakgrund med Bing API eller Bing Search utan API**

#### **Ã–versikt**
Detta projekt syftar till att hÃ¤mta och sÃ¤tta en ny skrivbordsbakgrund med bilder pÃ¥ **sÃ¤llskapsfÃ¥glar** varje gÃ¥ng programmet kÃ¶rs. Tidigare anvÃ¤ndes Wikimedia Commons API, men nu implementeras **Bing Image Search API eller alternativt Bing Search utan API** fÃ¶r att hÃ¤mta bilder. Programmet ska **respektera API-begrÃ¤nsningar** och logga API-anrop fÃ¶r att sÃ¤kerstÃ¤lla att den kostnadsfria nivÃ¥n aldrig Ã¶verskrids.

---

### **Kravspecifikation**

âœ… **Skrivbordsbakgrunder frÃ¥n Bing API eller Bing Search**  
- Vid varje kÃ¶rning av `.exe` hÃ¤mtas en **ny bild** frÃ¥n **antingen Bing Image Search API eller genom att hÃ¤mta bilder frÃ¥n Bing Search utan API**.
- Endast **landskapsorienterade bilder** (bredd > hÃ¶jd) fÃ¥r anvÃ¤ndas.
- Endast bilder pÃ¥ **sÃ¤llskapsfÃ¥glar** fÃ¥r anvÃ¤ndas:
  - Papegojor (Parrots, Macaws, Cockatoos, Budgerigars, African Grey Parrots)
  - Finkar (Finches, Canaries, Lovebirds)
  - Undulater
  - Andra fÃ¥glar som Ã¤r vanliga som husdjur (men ej hÃ¶ns, ankor eller bruksfÃ¥glar)
- Bilder fÃ¥r endast hÃ¤mtas frÃ¥n API:et om de inte Ã¶verskrider den dagliga API-grÃ¤nsen.

âœ… **Alternativ metod â€“ HÃ¤mta bilder frÃ¥n Bing utan API**  
- Om anvÃ¤ndaren vÃ¤ljer att **inte anvÃ¤nda API**, kan bilder istÃ¤llet hÃ¤mtas genom att:
  - **Simulera en anvÃ¤ndarsÃ¶kning pÃ¥ Bing** och extrahera bild-URL:er.
  - **AnvÃ¤nda en web scraper** fÃ¶r att hÃ¤mta den fÃ¶rsta relevanta bilden baserat pÃ¥ en sÃ¶kfrÃ¥ga.
  - **Filtrera resultat** fÃ¶r att endast inkludera landskapsbilder.
- Metoden **mÃ¥ste** efterlikna en riktig anvÃ¤ndares beteende och endast kÃ¶ras manuellt en gÃ¥ng per dag.
- Bing fÃ¥r **inte** belastas med stora mÃ¤ngder automatiserade fÃ¶rfrÃ¥gningar.

âœ… **Hantera API-begrÃ¤nsningar**  
- Programmet mÃ¥ste **logga API-anrop eller sÃ¶kningar** fÃ¶r att hÃ¥lla koll pÃ¥ hur mÃ¥nga anrop som gjorts.
- Om den dagliga API-grÃ¤nsen Ã¤r uppnÃ¥dd, eller om Bing utan API-sÃ¶kningen misslyckas, ska en **cachead bild** frÃ¥n tidigare kÃ¶rningar anvÃ¤ndas istÃ¤llet.

âœ… **Bildhantering**  
- Bilder sparas lokalt i en **cache** fÃ¶r att kunna Ã¥teranvÃ¤ndas vid behov.
- Endast bilder med en minsta upplÃ¶sning pÃ¥ **1920x1080** fÃ¥r anvÃ¤ndas.
- **Bilder som har anvÃ¤nts de senaste 50 gÃ¥ngerna fÃ¥r inte anvÃ¤ndas igen.**

âœ… **Manuell exekvering (ingen automatisering)**  
- `.exe` fÃ¥r **endast kÃ¶ras manuellt av anvÃ¤ndaren**, inte via schemalÃ¤ggning.
- Bing API eller Bing Search fÃ¥r endast anropas nÃ¤r `.exe` startas av anvÃ¤ndaren.

âœ… **Felhantering och loggning**  
- Alla API-anrop, sÃ¶kningar och misslyckade fÃ¶rsÃ¶k loggas i `bing_wallpaper.log`.
- Om en bild inte kan hÃ¤mtas eller sÃ¤ttas som bakgrund ska detta skrivas till loggen.

âœ… **Fil- och mappstruktur**  
Programmet behÃ¥ller samma struktur som tidigare:

```
BingWallpaper/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ bing_api.py     # API-anrop till Bing Image Search
â”‚   â”‚   â”œâ”€â”€ bing_scraper.py # Alternativ metod fÃ¶r att hÃ¤mta bilder utan API
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ logging_config.py # Loggning
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ wallpaper.py     # Hantering av nedladdning och bakgrundsinstÃ¤llning
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ main.py              # Huvudprogrammet
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ bing_wallpaper.log   # Loggfil fÃ¶r API-anrop och fel
â”œâ”€â”€ cache/
â”‚   â”œâ”€â”€ saved_images/        # Cache fÃ¶r tidigare bilder
â”œâ”€â”€ history.json             # HÃ¥ller koll pÃ¥ de 50 senaste bilderna
â”œâ”€â”€ config.json              # HÃ¥ller konfigurationsinstÃ¤llningar, inklusive API-nyckel
â””â”€â”€ README.md                # Dokumentation
```

---

### **Teknisk implementation**

âœ… **`bing_api.py` â€“ API-anrop till Bing**  
- Funktion fÃ¶r att hÃ¤mta en slumpmÃ¤ssig bild baserat pÃ¥ fÃ¶rdefinierade fÃ¥gelkategorier.  
- Returnerar endast bilder som **uppfyller alla krav (storlek, landskap, ej tidigare anvÃ¤nd).**  

âœ… **`bing_scraper.py` â€“ Alternativ metod fÃ¶r att hÃ¤mta bilder utan API**  
- AnvÃ¤nder antingen en **web scraper** eller ett **manuellt Bing-sÃ¶kkommando**.
- Filtrerar sÃ¶kresultat sÃ¥ att endast relevanta bilder hÃ¤mtas.
- Kontrollerar att bilden Ã¤r i landskapsformat och att den inte anvÃ¤nts nyligen.

âœ… **`wallpaper.py` â€“ Hanterar bakgrundsÃ¤ndring**  
- Laddar ner bilden och ser till att den sparas korrekt.  
- Om en bild Ã¤r stÃ¥ende, exkluderas den automatiskt.  
- Om en bild inte kan laddas ner, anvÃ¤nds en cachead bild istÃ¤llet.  

âœ… **`main.py` â€“ Huvudlogik**  
- Kontrollerar API-begrÃ¤nsningar innan den hÃ¤mtar en ny bild.  
- Loggar alla API-anrop och sÃ¶kningar fÃ¶r att sÃ¤kerstÃ¤lla att vi inte Ã¶verskrider dagliga grÃ¤nsen.  
- Hanterar fel om bilden inte kan laddas ner eller om API-anrop/sÃ¶kning misslyckas.

---

### **Krav pÃ¥ skriptleverans**
- Alla skript mÃ¥ste levereras i **kompletta versioner**, inte bara Ã¤ndrade delar.
- **OfÃ¶rÃ¤ndrade delar av skripten ska ocksÃ¥ inkluderas**, fÃ¶r att sÃ¤kerstÃ¤lla att inget saknas vid uppdateringar.
- Koden mÃ¥ste vara **testad och verifierad** innan den levereras.
- Varje uppdatering mÃ¥ste inkludera **tydliga kommentarer** om vad som har Ã¤ndrats.

---

### **Sammanfattning**
ğŸ”¹ **Bing API anvÃ¤nds eller alternativt Bing Search utan API.**  
ğŸ”¹ **Endast landskapsbilder av sÃ¤llskapsfÃ¥glar anvÃ¤nds.**  
ğŸ”¹ **API-anrop/sÃ¶kningar loggas och begrÃ¤nsas fÃ¶r att undvika kostnader och missbruk.**  
ğŸ”¹ **Ingen automatisk schemalÃ¤ggning â€“ anvÃ¤ndaren kÃ¶r `.exe` manuellt.**  
ğŸ”¹ **Skriptleverans sker enligt faststÃ¤llda riktlinjer.**  

ğŸš€ **Denna uppdaterade version ger full flexibilitet mellan API och direkt sÃ¶kning via Bing!**

